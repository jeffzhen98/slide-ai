(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var t=e.i(43476),n=e.i(71645);function a(){let[e,a]=(0,n.useState)([]),[r,s]=(0,n.useState)(0),[c,l]=(0,n.useState)(""),[i,u]=(0,n.useState)(!1),o=(0,n.useRef)(null),d=(0,n.useRef)(null),h=(0,n.useRef)(0);async function f(e){let t=e.target.files?.[0];if(!t)return;let n=new FormData;n.append("pdf",t);let r=await fetch("/api/upload",{method:"POST",body:n}),c=await r.json();c.success?(a(c.slides),s(0)):alert("Upload failed: "+c.error)}if((0,n.useEffect)(()=>{0===e.length||(async()=>{u(!0),l("");let t=await fetch("/api/narrate",{method:"POST",body:JSON.stringify({text:e[r].text}),headers:{"Content-Type":"application/json"}}),n=await t.json();n.success?l(n.narration):l("(Narration unavailable)"),u(!1)})()},[r,e]),0===e.length)return(0,t.jsx)("div",{className:"h-screen flex flex-col items-center justify-center",children:(0,t.jsx)("input",{type:"file",accept:"application/pdf",onChange:f})});let p=e[r];return(0,t.jsxs)("div",{className:"h-screen w-screen overflow-hidden bg-black text-white flex flex-col items-center justify-center",onTouchStart:function(e){o.current=e.touches[0].clientY},onTouchEnd:function(t){if(d.current=t.changedTouches[0].clientY,null==o.current||null==d.current)return;let n=o.current-d.current;n>50&&r<e.length-1&&s(r+1),n<-50&&r>0&&s(r-1),o.current=null,d.current=null},onWheel:function(t){let n=Date.now();!(n-h.current<400)&&(t.deltaY>40&&r<e.length-1?(s(r+1),h.current=n):t.deltaY<-40&&r>0&&(s(r-1),h.current=n))},children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center transition-all duration-300 ease-out",children:[(0,t.jsx)("img",{src:`data:image/png;base64,${p.image_base64}`,className:"max-h-[70vh] object-contain rounded-lg"}),(0,t.jsx)("p",{className:"mt-4 text-center whitespace-pre-wrap text-sm px-4",children:p.text}),(0,t.jsx)("div",{className:"mt-6 text-center text-sm opacity-80 px-4",children:i?(0,t.jsx)("span",{children:"Generating narration..."}):(0,t.jsx)("p",{children:c})})]},r),(0,t.jsxs)("div",{className:"absolute bottom-4 opacity-70 text-xs",children:["Slide ",r+1," / ",e.length]})]})}e.s(["default",()=>a])}]);