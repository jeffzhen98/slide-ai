{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../app/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Slide {\r\n  page: number;\r\n  image_base64: string;\r\n  text: string;\r\n}\r\n\r\nexport default function Home() {\r\n  const [slides, setSlides] = useState<Slide[]>([]);\r\n  const [current, setCurrent] = useState(0);\r\n\r\n  const [narration, setNarration] = useState(\"\");\r\n  const [loadingNarration, setLoadingNarration] = useState(false);\r\n\r\n  const touchStartY = useRef<number | null>(null);\r\n  const touchEndY = useRef<number | null>(null);\r\n  const lastScrollTime = useRef<number>(0);\r\n\r\n  async function handleUpload(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"pdf\", file);\r\n\r\n    const res = await fetch(\"/api/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (data.success) {\r\n      setSlides(data.slides);\r\n      setCurrent(0);\r\n    } else {\r\n      alert(\"Upload failed: \" + data.error);\r\n    }\r\n  }\r\n\r\n  // auto-fetch narration whenever slide changes\r\n  useEffect(() => {\r\n    if (slides.length === 0) return;\r\n\r\n    const fetchNarration = async () => {\r\n      setLoadingNarration(true);\r\n      setNarration(\"\");\r\n\r\n      const res = await fetch(\"/api/narrate\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ text: slides[current].text }),\r\n        headers: { \"Content-Type\": \"application/json\" }\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setNarration(data.narration);\r\n      } else {\r\n        setNarration(\"(Narration unavailable)\");\r\n      }\r\n      setLoadingNarration(false);\r\n    };\r\n\r\n    fetchNarration();\r\n  }, [current, slides]);\r\n\r\n  // mobile swipe\r\n  function handleTouchStart(e: React.TouchEvent) {\r\n    touchStartY.current = e.touches[0].clientY;\r\n  }\r\n\r\n  function handleTouchEnd(e: React.TouchEvent) {\r\n    touchEndY.current = e.changedTouches[0].clientY;\r\n    if (touchStartY.current == null || touchEndY.current == null) return;\r\n\r\n    const delta = touchStartY.current - touchEndY.current;\r\n\r\n    if (delta > 50 && current < slides.length - 1) setCurrent(current + 1);\r\n    if (delta < -50 && current > 0) setCurrent(current - 1);\r\n\r\n    touchStartY.current = null;\r\n    touchEndY.current = null;\r\n  }\r\n\r\n  // desktop scroll\r\n  function handleWheel(e: React.WheelEvent) {\r\n    const now = Date.now();\r\n    if (now - lastScrollTime.current < 400) return;\r\n\r\n    if (e.deltaY > 40 && current < slides.length - 1) {\r\n      setCurrent(current + 1);\r\n      lastScrollTime.current = now;\r\n    } else if (e.deltaY < -40 && current > 0) {\r\n      setCurrent(current - 1);\r\n      lastScrollTime.current = now;\r\n    }\r\n  }\r\n\r\n  // upload screen\r\n  if (slides.length === 0) {\r\n    return (\r\n      <div className=\"h-screen flex flex-col items-center justify-center\">\r\n        <input type=\"file\" accept=\"application/pdf\" onChange={handleUpload} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const slide = slides[current];\r\n\r\n  return (\r\n    <div\r\n      className=\"h-screen w-screen overflow-hidden bg-black text-white flex flex-col items-center justify-center\"\r\n      onTouchStart={handleTouchStart}\r\n      onTouchEnd={handleTouchEnd}\r\n      onWheel={handleWheel}\r\n    >\r\n      <div\r\n        key={current}\r\n        className=\"flex flex-col items-center justify-center transition-all duration-300 ease-out\"\r\n      >\r\n        <img\r\n          src={`data:image/png;base64,${slide.image_base64}`}\r\n          className=\"max-h-[70vh] object-contain rounded-lg\"\r\n        />\r\n\r\n        <p className=\"mt-4 text-center whitespace-pre-wrap text-sm px-4\">\r\n          {slide.text}\r\n        </p>\r\n\r\n        <div className=\"mt-6 text-center text-sm opacity-80 px-4\">\r\n          {loadingNarration ? (\r\n            <span>Generating narration...</span>\r\n          ) : (\r\n            <p>{narration}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-4 opacity-70 text-xs\">\r\n        Slide {current + 1} / {slides.length}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}