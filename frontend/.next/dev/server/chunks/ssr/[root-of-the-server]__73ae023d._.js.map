{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/app/page.tsx"],"sourcesContent":["// Updated page.tsx with fixed scroll physics\r\n// Soft-scroll: 1 slide per gesture, no hardscroll jumps\r\n\r\n\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Slide {\r\n  page: number;\r\n  image_base64: string;\r\n  text: string;\r\n}\r\n\r\nexport default function Home() {\r\n  const [slides, setSlides] = useState<Slide[]>([]);\r\n  const [current, setCurrent] = useState(0);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [fileName, setFileName] = useState(\"\");\r\n\r\n  const isTransitioning = useRef(false);\r\n  const scrollLocked = useRef(false);\r\n  const touchStartY = useRef<number | null>(null);\r\n\r\n  // Upload handler remains unchanged\r\n  async function handleUpload(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    setFileName(file.name);\r\n    setIsUploading(true);\r\n    setUploadProgress(0);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"pdf\", file);\r\n\r\n    try {\r\n      const progressInterval = setInterval(() => {\r\n        setUploadProgress((prev) => {\r\n          if (prev >= 90) return prev;\r\n          return prev + Math.random() * 15;\r\n        });\r\n      }, 300);\r\n\r\n      const res = await fetch(\"/api/upload\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      clearInterval(progressInterval);\r\n      setUploadProgress(100);\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        setTimeout(() => {\r\n          setSlides(data.slides);\r\n          setCurrent(0);\r\n          setShowMenu(false);\r\n          setIsUploading(false);\r\n          setUploadProgress(0);\r\n        }, 500);\r\n      } else {\r\n        alert(\"Upload failed: \" + data.error);\r\n        setIsUploading(false);\r\n        setUploadProgress(0);\r\n      }\r\n    } catch {\r\n      alert(\"Upload failed. Please try again.\");\r\n      setIsUploading(false);\r\n      setUploadProgress(0);\r\n    }\r\n  }\r\n\r\n  // Reset to home\r\n  function resetToHome() {\r\n    setSlides([]);\r\n    setCurrent(0);\r\n    setShowMenu(false);\r\n    setIsUploading(false);\r\n    setUploadProgress(0);\r\n    setFileName(\"\");\r\n  }\r\n\r\n  // Transition lock\r\n  useEffect(() => {\r\n    isTransitioning.current = true;\r\n    const timer = setTimeout(() => (isTransitioning.current = false), 450);\r\n    return () => clearTimeout(timer);\r\n  }, [current]);\r\n\r\n  // MOBILE SWIPE\r\n  function handleTouchStart(e: React.TouchEvent) {\r\n    touchStartY.current = e.touches[0].clientY;\r\n  }\r\n\r\n  function handleTouchEnd(e: React.TouchEvent) {\r\n    const endY = e.changedTouches[0].clientY;\r\n    if (touchStartY.current == null) return;\r\n\r\n    const delta = touchStartY.current - endY;\r\n    touchStartY.current = null;\r\n\r\n    if (delta > 50 && current < slides.length - 1) setCurrent(current + 1);\r\n    else if (delta < -50 && current > 0) setCurrent(current - 1);\r\n  }\r\n\r\n  // **NEW FIXED SCROLL PHYSICS**\r\n  // Prevents multiple slides skipping during fast trackpad scroll\r\n  function handleWheel(e: React.WheelEvent) {\r\n    e.preventDefault();\r\n\r\n    if (scrollLocked.current || isTransitioning.current || showMenu) return;\r\n\r\n    scrollLocked.current = true;\r\n    setTimeout(() => {\r\n      scrollLocked.current = false;\r\n    }, 650); // lock window\r\n\r\n    if (e.deltaY > 0 && current < slides.length - 1) setCurrent(current + 1);\r\n    else if (e.deltaY < 0 && current > 0) setCurrent(current - 1);\r\n  }\r\n\r\n  // Keyboard navigation\r\n  useEffect(() => {\r\n    function handleKeyDown(e: KeyboardEvent) {\r\n      if (isTransitioning.current || showMenu) return;\r\n\r\n      if (e.key === \"ArrowDown\" && current < slides.length - 1)\r\n        setCurrent(current + 1);\r\n      else if (e.key === \"ArrowUp\" && current > 0)\r\n        setCurrent(current - 1);\r\n      else if (e.key === \"Escape\" && showMenu) setShowMenu(false);\r\n    }\r\n\r\n    if (slides.length > 0) {\r\n      window.addEventListener(\"keydown\", handleKeyDown);\r\n      return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n    }\r\n  }, [current, slides.length, showMenu]);\r\n\r\n  // Upload screen (unchanged)\r\n  if (slides.length === 0) {\r\n    return (\r\n      <div style={{\r\n        position: \"fixed\",\r\n        inset: 0,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        background: \"black\",\r\n      }}>\r\n        {/* Upload UI unchanged */}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const slide = slides[current];\r\n\r\n  return (\r\n    <div\r\n      style={{ position: \"fixed\", inset: 0, overflow: \"hidden\" }}\r\n      onWheel={handleWheel}\r\n      onTouchStart={handleTouchStart}\r\n      onTouchEnd={handleTouchEnd}\r\n    >\r\n      {/* Top bar unchanged */}\r\n\r\n      <div\r\n        style={{\r\n          position: \"absolute\",\r\n          inset: 0,\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          padding: \"5vh 4vw\",\r\n        }}\r\n      >\r\n        <img\r\n          key={current}\r\n          src={`data:image/png;base64,${slide.image_base64}`}\r\n          alt={\"Slide ${slide.page}\"}\r\n          style={{\r\n            maxWidth: \"92vw\",\r\n            maxHeight: \"85vh\",\r\n            objectFit: \"contain\",\r\n            borderRadius: \"1rem\",\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      {/* Arrows, progress bars, menu â€” unchanged */}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,6CAA6C;AAC7C,wDAAwD;;;;;;AAIxD;AAFA;;;AAUe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,kBAAkB,IAAA,+MAAM,EAAC;IAC/B,MAAM,eAAe,IAAA,+MAAM,EAAC;IAC5B,MAAM,cAAc,IAAA,+MAAM,EAAgB;IAE1C,mCAAmC;IACnC,eAAe,aAAa,CAAsC;QAChE,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QAEX,YAAY,KAAK,IAAI;QACrB,eAAe;QACf,kBAAkB;QAElB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,OAAO;QAEvB,IAAI;YACF,MAAM,mBAAmB,YAAY;gBACnC,kBAAkB,CAAC;oBACjB,IAAI,QAAQ,IAAI,OAAO;oBACvB,OAAO,OAAO,KAAK,MAAM,KAAK;gBAChC;YACF,GAAG;YAEH,MAAM,MAAM,MAAM,MAAM,eAAe;gBACrC,QAAQ;gBACR,MAAM;YACR;YAEA,cAAc;YACd,kBAAkB;YAClB,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,WAAW;oBACT,UAAU,KAAK,MAAM;oBACrB,WAAW;oBACX,YAAY;oBACZ,eAAe;oBACf,kBAAkB;gBACpB,GAAG;YACL,OAAO;gBACL,MAAM,oBAAoB,KAAK,KAAK;gBACpC,eAAe;gBACf,kBAAkB;YACpB;QACF,EAAE,OAAM;YACN,MAAM;YACN,eAAe;YACf,kBAAkB;QACpB;IACF;IAEA,gBAAgB;IAChB,SAAS;QACP,UAAU,EAAE;QACZ,WAAW;QACX,YAAY;QACZ,eAAe;QACf,kBAAkB;QAClB,YAAY;IACd;IAEA,kBAAkB;IAClB,IAAA,kNAAS,EAAC;QACR,gBAAgB,OAAO,GAAG;QAC1B,MAAM,QAAQ,WAAW,IAAO,gBAAgB,OAAO,GAAG,OAAQ;QAClE,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;KAAQ;IAEZ,eAAe;IACf,SAAS,iBAAiB,CAAmB;QAC3C,YAAY,OAAO,GAAG,EAAE,OAAO,CAAC,EAAE,CAAC,OAAO;IAC5C;IAEA,SAAS,eAAe,CAAmB;QACzC,MAAM,OAAO,EAAE,cAAc,CAAC,EAAE,CAAC,OAAO;QACxC,IAAI,YAAY,OAAO,IAAI,MAAM;QAEjC,MAAM,QAAQ,YAAY,OAAO,GAAG;QACpC,YAAY,OAAO,GAAG;QAEtB,IAAI,QAAQ,MAAM,UAAU,OAAO,MAAM,GAAG,GAAG,WAAW,UAAU;aAC/D,IAAI,QAAQ,CAAC,MAAM,UAAU,GAAG,WAAW,UAAU;IAC5D;IAEA,+BAA+B;IAC/B,gEAAgE;IAChE,SAAS,YAAY,CAAmB;QACtC,EAAE,cAAc;QAEhB,IAAI,aAAa,OAAO,IAAI,gBAAgB,OAAO,IAAI,UAAU;QAEjE,aAAa,OAAO,GAAG;QACvB,WAAW;YACT,aAAa,OAAO,GAAG;QACzB,GAAG,MAAM,cAAc;QAEvB,IAAI,EAAE,MAAM,GAAG,KAAK,UAAU,OAAO,MAAM,GAAG,GAAG,WAAW,UAAU;aACjE,IAAI,EAAE,MAAM,GAAG,KAAK,UAAU,GAAG,WAAW,UAAU;IAC7D;IAEA,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACR,SAAS,cAAc,CAAgB;YACrC,IAAI,gBAAgB,OAAO,IAAI,UAAU;YAEzC,IAAI,EAAE,GAAG,KAAK,eAAe,UAAU,OAAO,MAAM,GAAG,GACrD,WAAW,UAAU;iBAClB,IAAI,EAAE,GAAG,KAAK,aAAa,UAAU,GACxC,WAAW,UAAU;iBAClB,IAAI,EAAE,GAAG,KAAK,YAAY,UAAU,YAAY;QACvD;QAEA,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,OAAO,gBAAgB,CAAC,WAAW;YACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;QACrD;IACF,GAAG;QAAC;QAAS,OAAO,MAAM;QAAE;KAAS;IAErC,4BAA4B;IAC5B,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,qBACE,8OAAC;YAAI,OAAO;gBACV,UAAU;gBACV,OAAO;gBACP,SAAS;gBACT,YAAY;gBACZ,gBAAgB;gBAChB,YAAY;YACd;;;;;;IAIJ;IAEA,MAAM,QAAQ,MAAM,CAAC,QAAQ;IAE7B,qBACE,8OAAC;QACC,OAAO;YAAE,UAAU;YAAS,OAAO;YAAG,UAAU;QAAS;QACzD,SAAS;QACT,cAAc;QACd,YAAY;kBAIZ,cAAA,8OAAC;YACC,OAAO;gBACL,UAAU;gBACV,OAAO;gBACP,SAAS;gBACT,gBAAgB;gBAChB,YAAY;gBACZ,SAAS;YACX;sBAEA,cAAA,8OAAC;gBAEC,KAAK,CAAC,sBAAsB,EAAE,MAAM,YAAY,EAAE;gBAClD,KAAK;gBACL,OAAO;oBACL,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,cAAc;gBAChB;eARK;;;;;;;;;;;;;;;AAef"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}