{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Slide {\r\n  page: number;\r\n  image_base64: string;\r\n  text: string;\r\n}\r\n\r\nexport default function Home() {\r\n  const [slides, setSlides] = useState<Slide[]>([]);\r\n  const [current, setCurrent] = useState(0);\r\n  \r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const edgeReached = useRef(false);\r\n\r\n  const [narration, setNarration] = useState(\"\");\r\n  const [loadingNarration, setLoadingNarration] = useState(false);\r\n\r\n  const touchStartY = useRef<number | null>(null);\r\n  const touchEndY = useRef<number | null>(null);\r\n  const lastScrollTime = useRef<number>(0);\r\n\r\n  async function handleUpload(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"pdf\", file);\r\n\r\n    const res = await fetch(\"/api/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    const data = await res.json();\r\n\r\n    if (data.success) {\r\n      setSlides(data.slides);\r\n      setCurrent(0);\r\n    } else {\r\n      alert(\"Upload failed: \" + data.error);\r\n    }\r\n  }\r\n\r\n  // auto-fetch narration whenever slide changes\r\n//   useEffect(() => {\r\n//     if (slides.length === 0) return;\r\n\r\n//     const fetchNarration = async () => {\r\n//       setLoadingNarration(true);\r\n//       setNarration(\"\");\r\n\r\n//       const res = await fetch(\"/api/narrate\", {\r\n//         method: \"POST\",\r\n//         body: JSON.stringify({ text: slides[current].text }),\r\n//         headers: { \"Content-Type\": \"application/json\" }\r\n//       });\r\n\r\n//       const data = await res.json();\r\n//       if (data.success) {\r\n//         setNarration(data.narration);\r\n//       } else {\r\n//         setNarration(\"(Narration unavailable)\");\r\n//       }\r\n//       setLoadingNarration(false);\r\n//     };\r\n\r\n//     fetchNarration();\r\n//   }, [current, slides]);\r\n\r\n  // mobile swipe\r\n  function handleTouchStart(e: React.TouchEvent) {\r\n    touchStartY.current = e.touches[0].clientY;\r\n  }\r\n\r\n  function handleTouchEnd(e: React.TouchEvent) {\r\n    touchEndY.current = e.changedTouches[0].clientY;\r\n    if (touchStartY.current == null || touchEndY.current == null) return;\r\n\r\n    const delta = touchStartY.current - touchEndY.current;\r\n\r\n    if (delta > 50 && current < slides.length - 1) setCurrent(current + 1);\r\n    if (delta < -50 && current > 0) setCurrent(current - 1);\r\n\r\n    touchStartY.current = null;\r\n    touchEndY.current = null;\r\n  }\r\n\r\n  // desktop scroll\r\n  function handleWheel(e: React.WheelEvent) {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n  \r\n    const now = Date.now();\r\n    const cooldown = 600; // ms between slide changes\r\n  \r\n    // allow normal scrolling\r\n    const atTop = container.scrollTop <= 0;\r\n    const atBottom = container.scrollTop + container.clientHeight >= container.scrollHeight;\r\n  \r\n    // if not at an edge, do nothing (let user scroll normally)\r\n    if (!atTop && !atBottom) {\r\n      edgeReached.current = false; // reset\r\n      return;\r\n    }\r\n  \r\n    // reached an edge, but require a second scroll\r\n    if (!edgeReached.current) {\r\n      edgeReached.current = true;\r\n      lastScrollTime.current = now;\r\n      return; // don't change slide yet\r\n    }\r\n  \r\n    // require cooldown AND second scroll\r\n    if (now - lastScrollTime.current < cooldown) return;\r\n  \r\n    if (atBottom && e.deltaY > 0 && current < slides.length - 1) {\r\n      setCurrent(current + 1);\r\n    } else if (atTop && e.deltaY < 0 && current > 0) {\r\n      setCurrent(current - 1);\r\n    }\r\n  \r\n    edgeReached.current = false;\r\n    lastScrollTime.current = now;\r\n  }\r\n  \r\n\r\n  // upload screen\r\n  if (slides.length === 0) {\r\n    return (\r\n      <div className=\"h-screen flex flex-col items-center justify-center\">\r\n        <input type=\"file\" accept=\"application/pdf\" onChange={handleUpload} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const slide = slides[current];\r\n\r\n  return (\r\n    <div\r\n      className=\"h-screen w-screen overflow-hidden bg-black text-white flex flex-col items-center justify-center\"\r\n      onTouchStart={handleTouchStart}\r\n      onTouchEnd={handleTouchEnd}\r\n      onWheel={handleWheel}\r\n    >\r\n        <div\r\n        ref={containerRef}\r\n        key={current}\r\n        className=\"flex flex-col items-center justify-start transition-all duration-300 ease-out overflow-y-auto h-screen w-screen p-4\"\r\n        >\r\n\r\n        <img\r\n          src={`data:image/png;base64,${slide.image_base64}`}\r\n          className=\"max-h-[70vh] object-contain rounded-lg\"\r\n        />\r\n\r\n        <p className=\"mt-4 text-center whitespace-pre-wrap text-sm px-4\">\r\n          {slide.text}\r\n        </p>\r\n\r\n        <div className=\"mt-6 text-center text-sm opacity-80 px-4\">\r\n          {loadingNarration ? (\r\n            <span>Generating narration...</span>\r\n          ) : (\r\n            <p>{narration}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"absolute bottom-4 opacity-70 text-xs\">\r\n        Slide {current + 1} / {slides.length}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/a2126/personalProjects/slide-ai/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}